#!/usr/bin/env node

const NG      = require( "../lib/jsNG" );
const ngabout = require( "commander" );

ngabout
    .usage( "<file ...>")
    .version( "0.0.3" )
    .description( "Get informaton about the content of a Norton Guide" )
    .option( "-i, --ignore-non-ng", "Don't include non-NG files in the list." )
    .parse( process.argv );

if ( ngabout.args.length > 0 ) {

    try {
        for ( let file of ngabout.args ) {

            const ng = new NG( file ).open();

            if ( ng.isNG() ) {
                console.log( "Name\t: "    + ng.filename()     );
                console.log( "Title\t: "   + ng.title()        );
                console.log( "Type\t: "    + ng.typeDesc()     );
                console.log( "Credits\t: " + ng.credits()[ 0 ] );
                console.log( "\t: "        + ng.credits()[ 1 ] );
                console.log( "\t: "        + ng.credits()[ 2 ] );
                console.log( "\t: "        + ng.credits()[ 3 ] );
                console.log( "\t: "        + ng.credits()[ 4 ] );
            } else if ( !ngabout.ignoreNonNg ) {
                console.log( "Name\t: " + ng.filename() );
                console.log( "Type\t: Not an NG" );
            }
        }
    } catch ( e ) {
        console.log( "Error: " + e.message );
        process.exitCode = 1;
    }

} else {
    ngabout.help();
}
